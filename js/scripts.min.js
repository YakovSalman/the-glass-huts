const menu=document.querySelector(".menu"),navList=document.querySelector(".nav__list"),body=document.querySelector(".main__body"),listWrap=document.querySelector(".nav__list-wrap");menu.addEventListener("click",(e=>{e.preventDefault(),menu.classList.toggle("active"),body.classList.toggle("locked"),navList.classList.toggle("active");const t=listWrap.offsetHeight+50;window.screen.height<=t?listWrap.classList.add("active"):listWrap.classList.remove("active")}));const swiperEl=document.querySelectorAll(".swiper");swiperEl.forEach((e=>{const t=e.closest(".content__wrap");new Swiper(e,{slidesPerView:1,spaceBetween:20,pagination:{el:t.querySelector(".swiper-pagination"),type:"fraction"},navigation:{nextEl:t.querySelector(".swiper-button-next"),prevEl:t.querySelector(".swiper-button-prev")},scrollbar:{el:t.querySelector(".swiper-scrollbar")}})}));const accordion=document.querySelectorAll(".accordion");function select(){document.querySelectorAll(".select-card").forEach((e=>{const t=e.querySelector(".select-card-btn"),a=e.querySelector(".select-card-list"),c=e.querySelector(".select-card-arrow i"),s=e.querySelector(".select-card-icon"),r=a.querySelectorAll(".select-card-item");t.addEventListener("click",(e=>{e.stopPropagation(),a.classList.toggle("active"),c.classList.toggle("active")})),r.forEach((e=>{e.addEventListener("click",(r=>{if(r.stopPropagation(),t.value=e.innerText,t.classList.add("active"),a.classList.remove("active"),c.classList.remove("active"),""!=t.value){c.closest(".select-card-arrow").classList.remove("inactive"),s.classList.remove("inactive"),t.classList.remove("inactive")}}))})),document.addEventListener("click",(e=>{e.target.closest(".select-card")||(a.classList.remove("active"),c.classList.remove("active"))}))}))}function selectLanguage(){const e=document.querySelectorAll(".select-language"),t=document.querySelector(".form-info__item-tel");t&&phone(),e.forEach((e=>{const a=e.querySelector(".select-language-btn"),c=e.querySelector(".select-language-list"),s=e.querySelector(".select-arrow"),r=c.querySelectorAll(".select-language-item");a.addEventListener("click",(e=>{e.stopPropagation(),c.classList.toggle("active"),s.classList.toggle("active"),r.forEach((e=>{const t=a.querySelector("img"),c=e.querySelector("img");t.getAttribute("src")==c.getAttribute("src")?e.classList.add("inactive"):e.classList.remove("inactive")}))})),r.forEach((e=>{e.addEventListener("click",(r=>{r.stopPropagation();const i=a.querySelector("img"),l=e.querySelector("img").cloneNode(!1);i.remove(),a.insertAdjacentElement("afterbegin",l),a.classList.add("active"),c.classList.remove("active"),s.classList.remove("active"),t&&phone()}))})),document.addEventListener("click",(e=>{e.target.closest(".select-card")||(c.classList.remove("active"),s.classList.remove("active"))}))}))}accordion.forEach((e=>{e.querySelectorAll(".accordion__item").forEach((e=>{e.addEventListener("click",(e=>{if(!e.target.classList.contains("accordion__add-services")){const t=e.currentTarget,a=t.querySelector(".accordion__content"),c=t.querySelector(".accordion-arrow"),s=a.scrollHeight;t.classList.toggle("active"),t.classList.contains("active")?(a.style.maxHeight=s+"px",a.style.marginTop="24px",c.classList.add("active")):(a.style.maxHeight="",a.style.marginTop="",c.classList.remove("active"))}}))}))})),select(),selectLanguage();const formData=document.querySelectorAll(".form-data");let guests={};localStorage.getItem("guests")&&(guests=JSON.parse(localStorage.getItem("guests"))),formData.forEach((e=>{const t=e.querySelector(".form-data-item-wrap"),a=e.querySelectorAll(".form-data-date"),c=e.querySelector(".btn-form-data"),s=t.querySelector(".form-data-num"),r=t.querySelector(".btn-minus"),i=t.querySelector(".btn-plus"),l=e.querySelector(".form-data-calendar"),n=e.querySelector(".calendar");if(n){if(c.addEventListener("click",(e=>{a.forEach((t=>{""==t.value?(e.preventDefault(),t.classList.add("inactive")):t.classList.remove("inactive")}))})),e.addEventListener("submit",(e=>{e.preventDefault()})),l.addEventListener("click",(e=>{e.stopPropagation(),n.classList.add("active")})),document.addEventListener("click",(e=>{e.target.closest(".calendar")||n.classList.remove("active")})),null!=n){const e=document.querySelector(".services-add"),t=n.querySelector(".calendar-btn-event"),a=n.querySelector(".calendar-btn-clear"),c=document.getElementById("CheckIn"),s=document.getElementById("CheckOut");t.addEventListener("click",(()=>{n.classList.remove("active")})),a.addEventListener("click",(()=>{n.querySelectorAll("li.active").forEach((e=>{e.classList.remove("active")}));Array.from(e.children).forEach((e=>{e.remove(),calcPrice(),c.value="",s.value=""}))}))}guests.value=s.value,d(),i.addEventListener("click",(()=>{if(3!=s.value){let e=parseInt(s.value),t=++e;s.value=t,guests.value=s.value,d()}})),r.addEventListener("click",(()=>{if(1!=s.value){let e=parseInt(s.value),t=--e;s.value=t,guests.value=s.value,d()}}))}const o=document.querySelector(".guests-payment");function d(){localStorage.setItem("guests",JSON.stringify(guests))}o&&(o.value=guests.value)}));const formstNumber=e=>e.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,"."),formstNumber2=e=>e.toString().replace(".",""),servicesWrapper=document.querySelector(".accordion-services"),servicesAdd=document.querySelector(".services-add"),servicesPayment=document.querySelector(".services-add-payment");let services=[];function test(){servicesAdd&&Array.from(servicesAdd.children).length<1&&(services=[],localStorage.removeItem("services"))}function calcPrice(){const e=document.querySelectorAll(".services-add-item"),t=document.querySelector(".services-price");let a=0,c={};localStorage.getItem("FullPrice")&&(c=JSON.parse(localStorage.getItem("FullPrice"))),e.forEach((e=>{const s=e.querySelector(".services-add-price"),r=parseInt(s.innerText.toString().replace(".",""));a+=r;const i={price:a};c.price=`${a}`,t.textContent=`${c.price}kr`,t.textContent=`${formstNumber(i.price)}kr`})),t&&e.length<1&&(t.textContent="0"),localStorage.setItem("FullPrice",JSON.stringify(c))}function saveToLocalStorage(){localStorage.setItem("services",JSON.stringify(services))}localStorage.getItem("services")&&(services=JSON.parse(localStorage.getItem("services"))),test(),services.forEach((e=>{if(servicesPayment){const t=`<div class="services-add-item">\n                            <div class="services-add-name">${e.title}</div>\n                            <div class="services-add-price">${e.price}</div>\n                          </div>`;servicesPayment.insertAdjacentHTML("beforeend",t)}})),null!=servicesWrapper&&servicesWrapper.addEventListener("click",(e=>{if(e.target.classList.contains("accordion__add-services")){const t=e.target.closest(".accordion__item"),a=t.querySelector(".accordion__trigger-title"),c=t.querySelector(".accordion__trigger-subtitle"),s={title:a.innerText,price:c.innerText};services.push(s),saveToLocalStorage();const r=`<div class="services-add-item">\n                                <div class="services-add-name">${s.title}</div>\n                                <div class="services-add-price">${s.price}</div>\n                                <button class="services-add-close">\n                                    <i class="fa-solid fa-xmark services-icon"></i>\n                                </button>\n                              </div>`;servicesAdd.insertAdjacentHTML("beforeend",r);document.querySelectorAll(".services-add-item").forEach((t=>{const a=t.querySelector(".services-add-name");s.title===a.innerText&&(e.target.setAttribute("disabled",""),e.target.classList.add("active"))})),calcPrice(),test()}})),servicesAdd&&servicesAdd.addEventListener("click",(e=>{const t=e.target.closest(".services-add-item");if(null==t)return;const a=t.querySelector(".services-add-name");servicesWrapper.querySelectorAll(".accordion__item").forEach((e=>{const t=e.querySelector(".accordion__trigger-title"),c=e.querySelector(".accordion__add-services");a.innerText==t.innerText&&(c.classList.remove("active"),c.removeAttribute("disabled"))})),e.target.classList.contains("services-add-close")&&t.remove();const c=services.findIndex((e=>{if(e.title==a.textContent)return!0}));services.splice(c,1),calcPrice(),saveToLocalStorage(),test()})),choiceDays(),calcPrice();const calendar=document.querySelector(".calendar"),calendarWrap=document.querySelectorAll(".calendar-wrap"),calendars=[];function choiceDays(){const e=document.querySelector(".calendar"),t=document.querySelector(".services-add"),a=document.querySelector(".services-add-payment");let c={},s={},r={};localStorage.getItem("newLease")&&(c=JSON.parse(localStorage.getItem("newLease"))),localStorage.getItem("checkInDate")&&(s=JSON.parse(localStorage.getItem("checkInDate"))),localStorage.getItem("checkOutDate")&&(r=JSON.parse(localStorage.getItem("checkOutDate")));const i=document.querySelector(".calendar-wrapper");if(null!=i){const a=i.querySelectorAll(".calendar-days-item.active"),o=document.getElementById("CheckIn"),d=document.getElementById("CheckOut"),v=Array.from(a);if(v.length>1){const a=v.shift(),i=v.shift();function l(e){const t=e.closest(".calendar-wrap"),a=t.querySelector(".calendar-month"),c=t.querySelector(".calendar-year"),s=parseInt(c.textContent),r=a.textContent,i=parseInt(e.textContent);return new Date(`${i} ${r} ${s}`)}const u=l(i)-l(a),m=Math.ceil(u/1e3/60/60/24);function n(e){return`${e.getMonth()+1}/${e.getDate()}/${e.getFullYear()}`}o.value=`${n(l(a))}`,d.value=`${n(l(i))}`,s.valueDate=o.value,r.valueDate=d.value;const g=3200*m;c.title=`${m}`,c.price=`${g}`,localStorage.setItem("newLease",JSON.stringify(c)),localStorage.setItem("checkInDate",JSON.stringify(s)),localStorage.setItem("checkOutDate",JSON.stringify(r));const L=`<div class="services-add-item services-add-item-lease">\n                                    <div class="services-add-name">3.200kr x ${m} nights</div>\n                                    <div class="services-add-price">${formstNumber(g)}kr</div>\n                                  </div>`;t.insertAdjacentHTML("afterbegin",L),e.classList.remove("active"),calcPrice()}}if(a){const e=`<div class="services-add-item services-add-item-lease">\n      <div class="services-add-name">3.200kr x ${c.title} nights</div>\n      <div class="services-add-price">${formstNumber(c.price)}kr</div>\n      </div>`;a.insertAdjacentHTML("afterbegin",e)}if(document.querySelector(".form-data-payment")){function o(e,t){(e=document.getElementById(e)).value=t.valueDate}o("checkInPayment",s),o("checkOutPayment",r)}}function phone(){const e=document.querySelector(".form-info__item-tel").querySelector(".select-language-btn").querySelector("img"),t=document.getElementById("phoneNumber"),a=t.value;if(e.classList.contains("denmark")){const e=e=>e.replace(/(\d{2})(?!\s|$)/gm,"$1 "),c=/^[0-9+]+$/;t.addEventListener("focus",(()=>{""==a&&(t.value="+ 45 ")})),t.addEventListener("blur",(()=>{t.value.length<=5&&(t.value="")})),t.addEventListener("input",(()=>{""==t.value&&(t.value="+ 45 "),c.test(t.value)||(t.value=t.value.replace(/[^0-9+]/g,""),t.value=e(t.value)),t.value.length>15&&(t.value=t.value.slice(0,15))}))}if(e.classList.contains("united-kingdom")){const e=e=>e.replace(/(\d{2})(?!\s|$)/gm,"$1 "),c=/^[0-9+]+$/;t.addEventListener("focus",(()=>{""==a&&(t.value="+ 44 ")})),t.addEventListener("blur",(()=>{t.value.length<=5&&(t.value="")})),t.addEventListener("input",(()=>{""==t.value&&(t.value="+ 44 "),c.test(t.value)||(t.value=t.value.replace(/[^0-9+]/g,""),t.value=e(t.value)),a.length>18&&(t.value=t.value.slice(0,18))}))}if(e.classList.contains("germany")){const e=e=>e.replace(/(\d{2})(?!\s|$)/gm,"$1 "),c=/^[0-9+]+$/;t.addEventListener("focus",(()=>{""==a&&(t.value="+ 49 ")})),t.addEventListener("blur",(()=>{t.value.length<=5&&(t.value="")})),t.addEventListener("input",(()=>{""==t.value&&(t.value="+ 49 "),c.test(t.value)||(t.value=t.value.replace(/[^0-9+]/g,""),t.value=e(t.value)),t.value.length>21&&(t.value=t.value.slice(0,21))}))}}calendarWrap.forEach((e=>{const t=e.querySelector(".calendar-days"),a=e.querySelector(".calendar-month"),c=document.querySelector(".calendar-month-2"),s=e.querySelector(".calendar-year");let r=new Date,i=r.getFullYear(),l=r.getMonth(),n=r.getMonth()+1;const o=["January","February","March","April","May","June","July","August","September","October","November","December"],d=()=>{let r=new Date(i,l,1).getDay(),d=new Date(i,l+1,0).getDate(),v=new Date(i,n,1).getDay(),u=new Date(i,n+1,0).getDate(),m="";function g(e,t){for(let t=e;t>1;t--)m+="<li></li>";if(0==e)for(let e=0;e<6;e++)m+="<li></li>";for(let e=1;e<=t;e++)m+=`<li class="calendar-days-item">${e}</li>`}e.classList.contains("calendar-wrap-next")&&g(v,u),e.classList.contains("calendar-wrap-prev")&&g(r,d),a.textContent=`${o[l]}`,c.textContent=`${o[n]}`,s.textContent=i,t.innerHTML=m};d(),null!=calendar&&calendar.addEventListener("click",(e=>{e.target.classList.contains("btn-calendar-next")&&(11==l&&(l=-1),11==n&&(n=-1),a.textContent=o[++l],c.textContent=o[++n],d()),e.target.classList.contains("btn-calendar-prev")&&(0==l&&(l=12),0==n&&(n=12),a.textContent=o[--l],c.textContent=o[--n],d())}))})),null!=calendar&&calendar.addEventListener("click",(e=>{const t=servicesAdd.querySelector(".services-add-item-lease");if(e.target.classList.contains("calendar-days-item")){e.target.classList.toggle("active");const a=calendar.querySelectorAll(".active");if(a.length>2&&e.target.classList.remove("active"),a.length>=2)choiceDays();else{if(null==t)return;t.remove(),calcPrice()}a.length>=2&&(e.target.classList.contains("active")||(t.remove(),calcPrice()))}}));const formPayment=document.querySelectorAll("#formPayment");function isFormValid(e){for(var t=0;t<e.length;t++)if(""===e[t].value.trim())return!1;return!0}function scroolSending(){const e=document.querySelector(".header").getBoundingClientRect().top-50;window.scrollBy({top:e,behavior:"smooth"})}formPayment.forEach((e=>{const t=e.querySelectorAll(".form-info-input"),a=/^[a-zA-ZäöüßÄÖÜ]+$/,c=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu,s=e.querySelector(".form-checkbox"),r=e.querySelector(".payment-sending"),i=s.closest(".form-info__item-check").querySelector("label");t.forEach((e=>{e.addEventListener("change",(t=>{if(""!=e.value){const t=e.closest(".form-info__item").querySelector(".select-card-arrow");if(e.classList.remove("inactive"),function(e){const t=e.closest(".form-info__item").querySelector(".form-info-error");"firstName"!=e.name&&"lastName"!=e.name&&"city"!=e.name&&"country"!=e.name||(a.test(e.value)?(t.classList.remove("active"),e.classList.remove("inactive")):(t.classList.add("active"),e.classList.add("inactive")));"email"==e.name&&(c.test(e.value)?(t.classList.remove("active"),e.classList.remove("inactive")):(t.classList.add("active"),e.classList.add("inactive")));"cardNumber"==e.name&&(e.value.length<12?(t.classList.add("active"),e.classList.add("inactive")):(t.classList.remove("active"),e.classList.remove("inactive")));"expiration"==e.name&&(e.value.length<5?(t.classList.add("active"),e.classList.add("inactive")):(t.classList.remove("active"),e.classList.remove("inactive")));"CCV"==e.name&&(e.value.length<3?(t.classList.add("active"),e.classList.add("inactive")):(t.classList.remove("active"),e.classList.remove("inactive")));"zitCode"==e.name&&(e.value.length<9?(t.classList.add("active"),e.classList.add("inactive")):(t.classList.remove("active"),e.classList.remove("inactive")))}(e),null==t)return;t.classList.remove("inactive")}else e.classList.add("inactive")})),e.addEventListener("focus",(()=>{const t=e.closest(".form-info__item").querySelector("label");null!=t&&(t.classList.add("active"),e.classList.add("active"))})),e.addEventListener("blur",(()=>{const t=e.closest(".form-info__item").querySelector("label");null!=t&&(t.classList.remove("active"),e.classList.remove("active"))})),e.addEventListener("input",(()=>{if("cardNumber"!=e.name&&"expiration"!=e.name&&"ccv"!=e.name&&"zitCode"!=e.name||(e.value=e.value.replace(/\D/g,"")),"cardNumber"==e.name){const t=19;e.value=(e=>e.replace(/(\d{4})(?!\s|$)/gm,"$1 "))(e.value),e.value.length>t&&(e.value=e.value.slice(0,t))}if("expiration"==e.name){const t=5;e.value=(e=>e.replace(/(\d{2})(?!\s|$)/gm,"$1/"))(e.value),e.value.length>t&&(e.value=e.value.slice(0,t))}if("ccv"==e.name){const t=3;e.value.length>t&&(e.value=e.value.slice(0,t))}if("zitCode"==e.name){const t=9;e.value.length>t&&(e.value=e.value.slice(0,t))}}))})),s.addEventListener("change",(()=>{s.checked?i.classList.remove("inactive"):i.classList.add("inactive")})),e.addEventListener("submit",(a=>{a.preventDefault(),t.forEach((e=>{const t=e.closest(".form-info__item"),a=t.querySelector(".select-card-arrow"),c=t.querySelector(".select-card-icon");""===e.value?e.classList.add("inactive"):e.classList.remove("inactive"),a&&(""===e.value?a.classList.add("inactive"):a.classList.remove("inactive")),c&&(""===e.value?c.classList.add("inactive"):c.classList.remove("inactive")),s.checked?i.classList.remove("inactive"):i.classList.add("inactive")})),s.checked&&isFormValid(t)&&(r.classList.add("active"),scroolSending(),e.reset())}))}));const formConnection=document.querySelectorAll(".form-connection");formConnection.forEach((e=>{const t=e.querySelectorAll(".form-connection-input"),a=e.querySelector(".connection-sending");t.forEach((e=>{e.addEventListener("change",(()=>{!function(e){const t=e.closest(".form-connection-item").querySelector(".form-info-error"),a=/^[a-zA-ZäöüßÄÖÜ]+$/,c=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu;"firstName"!=e.name&&"lastName"!=e.name||(a.test(e.value)?(t.classList.remove("active"),e.classList.remove("inactive")):(t.classList.add("active"),e.classList.add("inactive"))),"email"==e.name&&(c.test(e.value)?(t.classList.remove("active"),e.classList.remove("inactive")):(t.classList.add("active"),e.classList.add("inactive")))}(e)})),e.addEventListener("focus",(()=>{e.closest(".form-connection-item").querySelector("label").classList.add("active"),e.classList.add("active")})),e.addEventListener("blur",(()=>{e.closest(".form-connection-item").querySelector("label").classList.remove("active"),e.classList.remove("active")}))})),e.addEventListener("submit",(c=>{c.preventDefault(),t.forEach((e=>{""==e.value?e.classList.add("inactive"):e.classList.remove("inactive")})),isFormValid(t)&&(a.classList.add("active"),e.reset())}))}));const formFooter=document.querySelectorAll(".form-footer");formFooter.forEach((e=>{const t=e.querySelector(".form__footer-input"),a=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu,c=e.querySelector(".form-footer-error"),s=e.querySelector(".form-footer-message");e.addEventListener("submit",(c=>{c.preventDefault(),""==t.value?t.classList.add("inactive"):t.classList.remove("inactive"),""!=t.value&&a.test(t.value)?(s.classList.add("active"),e.reset()):s.classList.remove("active")})),t.addEventListener("change",(()=>{a.test(t.value)?c.classList.remove("active"):c.classList.add("active")}))}));const secondaryLink=document.querySelector(".intro-secondary-link-map"),btnTransparen=document.querySelector(".btn-transparen-scroll");function scrollEl(e){const t=(e=document.querySelector(e)).getBoundingClientRect().top-50;window.scrollBy({top:t,behavior:"smooth"})}secondaryLink&&secondaryLink.addEventListener("click",(e=>{e.preventDefault(),scrollEl(".section-area-map")})),btnTransparen&&btnTransparen.addEventListener("click",(e=>{e.preventDefault(),scrollEl(".connection__inner")}));